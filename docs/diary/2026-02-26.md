# 日報 2026-02-26

## 今日やったこと

Biome導入・GitHub Actions CI構築・CLAUDE.md整備を行った。

### 実装内容

**Biome導入**

- `@biomejs/biome@2.4.4` をpnpm workspaceルートのdevDependenciesに追加
- `biome.json` を作成（TypeScript/React向け設定）
  - Tailwind CSS v4の `@theme` / `@apply` 構文を有効化（`css.parser.tailwindDirectives: true`）
  - import整理を `assist.actions.source.organizeImports` で設定（Biome 2.x構文）
  - a11yルール（`noLabelWithoutControl`, `useButtonType`）をwarnに設定
  - `files.includes` でsrc/配下のみチェック対象（Biome 2.xでは`files.ignore`廃止）
  - VCS連携（`vcs.useIgnoreFile: true`）でgitignoreを自動参照

**package.jsonスクリプト追加**

- `lint` — Biome lint & format check
- `lint:fix` — 自動修正
- `format` — フォーマットのみ修正
- `ci` — lint + typecheck（CIと同等）

**GitHub Actions CI**（`.github/workflows/ci.yml`）

- push/PR時にBiome lint + TypeScript型チェックを自動実行
- pnpmキャッシュ設定でインストール時間を短縮

**既存コード修正**（Biome対応）

- `api.ts`: `forEach` → `for...of`（`useIterableCallbackReturn`対応）
- `home.tsx`, `new.tsx`: 空デストラクチャリング `{}` → `_args`（`noEmptyPattern`対応）

**CLAUDE.md更新**

- プロジェクト構成・開発コマンド・ツール情報・APIエンドポイント一覧を追記
- より実用的なリファレンスドキュメントとして整備

## 今度やりたいこと

- テスト（Vitest）の追加
- a11yルール（`noLabelWithoutControl`等）の実際の修正（htmlFor追加）
- 異動履歴の記録・表示
- 照会フロー（保証人照会）の実装
- 実際のDB対応（Drizzle ORM + SQLite）

## 所感

Biome 2.xはAPIが1.x系とかなり変わっていた。`organizeImports`が`assist`配下に移動し、`files.ignore`が`files.includes`（negationパターン）に変わっている。スキーマJSONを直接読んで確認するのが一番早かった。

GitHub Actionsは `pnpm/action-setup@v4` + `actions/setup-node@v4` の組み合わせでキャッシュ込みでもシンプルに書ける。

## 学び

- Biome 2.xのスキーマは `node_modules/.pnpm/@biomejs+biome@X.Y.Z/.../configuration_schema.json` で確認できる
- `files.includes` のnegationパターン（`!**/dist/**`）でignore相当の設定ができる
- Biomeのwarnレベルはexit code 0なのでCIをブロックしない
- GitHub Actionsでpnpmキャッシュは `actions/setup-node` の `cache: pnpm` で自動対応できる
